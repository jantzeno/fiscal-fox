<app-header></app-header>
<div class="mx-auto">
  <h2>Budget List</h2>
  <table
    class="table table-striped"
    *ngIf="budgets$ | async as budgets; else loadingBudgets"
  >
    <thead>
      <tr>
        <th scope="col">Budget</th>
        <th scope="col">Amount</th>
        <th scope="col"># Expenses</th>
        <th scope="col">Expenses Total</th>
        <th scope="col">Remaining</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let budget of budgets; let id = index">
        <th>
          <a [routerLink]="['/budgets', budget.id]">
            {{ budget.name }}
          </a>
        </th>
        <th>{{ budget.amount | currency }}</th>
        <th>{{ logic.countExpenses(budget, expenses$ | async) }}</th>
        <th>
          {{
            logic.calcExpenseTotalForBudget(budget, expenses$ | async)
              | currency
          }}
        </th>
        <th>
          {{ logic.calcRemainingBudget(budget, expenses$ | async) | currency }}
        </th>
      </tr>
    </tbody>
  </table>

  <ng-template #loadingBudgets>
    <div>Loading Budgets...</div>
  </ng-template>
</div>
